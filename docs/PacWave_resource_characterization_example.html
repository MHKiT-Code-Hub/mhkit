

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PacWave Resource Assessment &mdash; MHKiT v0.5.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/mhkit.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Delft3D IO Module" href="Delft3D_example.html" />
    <link rel="prev" title="MHKiT CDIP IO" href="cdip_example.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> MHKiT
          

          
          </a>

          
            
            
              <div class="version">
                v0.5.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="qc.html">QC Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="wave.html">Wave Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="river.html">River Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="tidal.html">Tidal Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="power.html">Power Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="loads.html">Loads Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="dolfyn.html">Dolfyn Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utils Module</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="python.html">MHKiT-Python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="python.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html#api-documentation">API Documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="python.html#examples">Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="qc_example.html">MHKiT Quality Control Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="wave_example.html">MHKiT Wave Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="river_example.html">MHKiT River Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tidal_example.html">MHKiT Tidal Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_example.html">MHKiT Power Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="loads_example.html">MHKiT Loads Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="environmental_contours_example.html">MHKiT Environmental Contours</a></li>
<li class="toctree-l3"><a class="reference internal" href="wecsim_example.html">MHKiT WEC-Sim Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="SWAN_example.html">MHKiT SWAN Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="WPTO_hindcast_example.html">MHKiT WPTO Hindcast Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="cdip_example.html">MHKiT CDIP IO</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">PacWave Resource Assessment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Buoy-Location">Buoy Location</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Import-Data-from-NDBC">Import Data from NDBC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Calculate-QoIs-from-Spectral-Data">Calculate QoIs from Spectral Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Average-Annual-Energy-Table">Average Annual Energy Table</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Wave-Power-by-Month">Wave Power by Month</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Monthly-Cumulative-Distribution">Monthly Cumulative Distribution</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Extreme-Sea-States">Extreme Sea States</a></li>
<li class="toctree-l4"><a class="reference internal" href="#Calculate-Sea-State-Representative-Clusters">Calculate Sea State Representative Clusters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Delft3D_example.html">Delft3D IO Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="adcp_example.html">Reading ADCP Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv_example.html">Reading ADV Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_MLER_example.html">MLER example</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_contour_example.html">Extreme Conditions Modeling - Contour Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_full_sea_state_example.html">Extreme Conditions Modeling - Full Sea State Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="short_term_extremes_example.html">MHKit Short-term Extreme Loads</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python.html#online-forum">Online Forum</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html#software-tests">Software Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="matlab.html">MHKiT-MATLAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="citeus.html">Cite Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Online Forum</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MHKiT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="python.html">MHKiT-Python</a> &raquo;</li>
        
      <li>PacWave Resource Assessment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/PacWave_resource_characterization_example.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="PacWave-Resource-Assessment">
<h1>PacWave Resource Assessment<a class="headerlink" href="#PacWave-Resource-Assessment" title="Permalink to this headline">¶</a></h1>
<p>This example notebook provides an example using MHKiT to perform a resource assessment similar to Dunkel et. al at the PACWAVE site following the IEC 62600-101 where applicable. PacWave is an open ocean, grid-connected, full-scale test facility consisting of two sites (PacWave-North &amp; PacWave-South) for wave energy conversion technology testing located just a few miles from the deep-water port of Newport, Oregon. This example notebook performs a resource analysis using omni-directional wave data
from a nearby NDBC buoy and replicates plots created by Dunkel et. al and prescribed by IEC TS 62600-101 using these data.</p>
<p>Note: this example notebook requires the Python package folium which is not a requirement of MHKiT and may need to be pip installed seperately.</p>
<p>Dunkle, Gabrielle, et al. “PacWave Wave Resource Assessment.” (2020).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">mhkit</span>
<span class="kn">from</span> <span class="nn">mhkit.wave</span> <span class="kn">import</span> <span class="n">resource</span><span class="p">,</span> <span class="n">performance</span><span class="p">,</span> <span class="n">graphics</span>
<span class="kn">from</span> <span class="nn">sklearn.mixture</span> <span class="kn">import</span> <span class="n">GaussianMixture</span>
<span class="kn">from</span> <span class="nn">mhkit.wave.io</span> <span class="kn">import</span> <span class="n">ndbc</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">colors</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">matplotlib.pylab</span> <span class="k">as</span> <span class="nn">pylab</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;legend.fontsize&#39;</span><span class="p">:</span> <span class="s1">&#39;x-large&#39;</span><span class="p">,</span>
          <span class="s1">&#39;figure.figsize&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
         <span class="s1">&#39;axes.labelsize&#39;</span><span class="p">:</span> <span class="s1">&#39;x-large&#39;</span><span class="p">,</span>
         <span class="s1">&#39;axes.titlesize&#39;</span><span class="p">:</span><span class="s1">&#39;x-large&#39;</span><span class="p">,</span>
         <span class="s1">&#39;xtick.labelsize&#39;</span><span class="p">:</span><span class="s1">&#39;x-large&#39;</span><span class="p">,</span>
         <span class="s1">&#39;ytick.labelsize&#39;</span><span class="p">:</span><span class="s1">&#39;x-large&#39;</span><span class="p">}</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="Buoy-Location">
<h2>Buoy Location<a class="headerlink" href="#Buoy-Location" title="Permalink to this headline">¶</a></h2>
<p>The closest NDBC buoy to PacWave is located further from shore than the PacWave sites, as can be seen in the map below. The buoy used in this analysis is NDBC buoy 46050 (blue marker). The analysis here will focus on PacWave-South (red marker) which is approximately 40 km closer to shore than the NDBC buoy. PacWave-North is shown by the green marker.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">m</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">44.613600975457715</span><span class="p">,</span> <span class="o">-</span><span class="mf">123.74317583354498</span><span class="p">],</span> <span class="n">zoom_start</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">tiles</span><span class="o">=</span><span class="s2">&quot;Stamen Terrain&quot;</span><span class="p">,</span> <span class="n">control_scale</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;NDBC 46050&quot;</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">([</span><span class="mf">44.669</span><span class="p">,</span> <span class="o">-</span><span class="mf">124.546</span><span class="p">],</span> <span class="n">popup</span><span class="o">=</span><span class="s2">&quot;&lt;i&gt; Water depth: 160 m&lt;/i&gt;&quot;</span><span class="p">,</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;PACWAVE North&quot;</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">([</span><span class="mf">44.69</span><span class="p">,</span> <span class="o">-</span><span class="mf">124.13472222222222</span><span class="p">],</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="n">icon</span><span class="o">=</span><span class="s2">&quot;th-large&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
<span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;PACWAVE South&quot;</span>
<span class="n">folium</span><span class="o">.</span><span class="n">Marker</span><span class="p">([</span><span class="mf">44.58444444444444</span><span class="p">,</span> <span class="o">-</span><span class="mf">124.2125</span><span class="p">],</span> <span class="n">tooltip</span><span class="o">=</span><span class="n">tooltip</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">folium</span><span class="o">.</span><span class="n">Icon</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;th&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

<span class="n">m</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;index.png&quot;</span><span class="p">)</span>

<span class="n">m</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><span style="color:#565656">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe src="about:blank" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" data-html=%3C%21DOCTYPE%20html%3E%0A%3Chead%3E%20%20%20%20%0A%20%20%20%20%3Cmeta%20http-equiv%3D%22content-type%22%20content%3D%22text/html%3B%20charset%3DUTF-8%22%20/%3E%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%3Cscript%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20L_NO_TOUCH%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20L_DISABLE_3D%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%3C/script%3E%0A%20%20%20%20%0A%20%20%20%20%3Cstyle%3Ehtml%2C%20body%20%7Bwidth%3A%20100%25%3Bheight%3A%20100%25%3Bmargin%3A%200%3Bpadding%3A%200%3B%7D%3C/style%3E%0A%20%20%20%20%3Cstyle%3E%23map%20%7Bposition%3Aabsolute%3Btop%3A0%3Bbottom%3A0%3Bright%3A0%3Bleft%3A0%3B%7D%3C/style%3E%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//cdn.jsdelivr.net/npm/leaflet%401.6.0/dist/leaflet.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//code.jquery.com/jquery-1.12.4.min.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js%22%3E%3C/script%3E%0A%20%20%20%20%3Cscript%20src%3D%22https%3A//cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js%22%3E%3C/script%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A//cdn.jsdelivr.net/npm/leaflet%401.6.0/dist/leaflet.css%22/%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css%22/%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css%22/%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css%22/%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A//cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css%22/%3E%0A%20%20%20%20%3Clink%20rel%3D%22stylesheet%22%20href%3D%22https%3A//cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css%22/%3E%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cmeta%20name%3D%22viewport%22%20content%3D%22width%3Ddevice-width%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20initial-scale%3D1.0%2C%20maximum-scale%3D1.0%2C%20user-scalable%3Dno%22%20/%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cstyle%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23map_bfedd35db5f14f82931ea785beb31402%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20position%3A%20relative%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20width%3A%20100.0%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20height%3A%20100.0%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20left%3A%200.0%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20top%3A%200.0%25%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%3C/style%3E%0A%20%20%20%20%20%20%20%20%0A%3C/head%3E%0A%3Cbody%3E%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3Cdiv%20class%3D%22folium-map%22%20id%3D%22map_bfedd35db5f14f82931ea785beb31402%22%20%3E%3C/div%3E%0A%20%20%20%20%20%20%20%20%0A%3C/body%3E%0A%3Cscript%3E%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20map_bfedd35db5f14f82931ea785beb31402%20%3D%20L.map%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22map_bfedd35db5f14f82931ea785beb31402%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20center%3A%20%5B44.613600975457715%2C%20-123.74317583354498%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20crs%3A%20L.CRS.EPSG3857%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zoom%3A%209%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20zoomControl%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20preferCanvas%3A%20false%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20L.control.scale%28%29.addTo%28map_bfedd35db5f14f82931ea785beb31402%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20tile_layer_f2e74d227b1b426d8f32033db6a91db9%20%3D%20L.tileLayer%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22https%3A//stamen-tiles-%7Bs%7D.a.ssl.fastly.net/terrain/%7Bz%7D/%7Bx%7D/%7By%7D.jpg%22%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22attribution%22%3A%20%22Map%20tiles%20by%20%5Cu003ca%20href%3D%5C%22http%3A//stamen.com%5C%22%5Cu003eStamen%20Design%5Cu003c/a%5Cu003e%2C%20under%20%5Cu003ca%20href%3D%5C%22http%3A//creativecommons.org/licenses/by/3.0%5C%22%5Cu003eCC%20BY%203.0%5Cu003c/a%5Cu003e.%20Data%20by%20%5Cu0026copy%3B%20%5Cu003ca%20href%3D%5C%22http%3A//openstreetmap.org%5C%22%5Cu003eOpenStreetMap%5Cu003c/a%5Cu003e%2C%20under%20%5Cu003ca%20href%3D%5C%22http%3A//creativecommons.org/licenses/by-sa/3.0%5C%22%5Cu003eCC%20BY%20SA%5Cu003c/a%5Cu003e.%22%2C%20%22detectRetina%22%3A%20false%2C%20%22maxNativeZoom%22%3A%2018%2C%20%22maxZoom%22%3A%2018%2C%20%22minZoom%22%3A%200%2C%20%22noWrap%22%3A%20false%2C%20%22opacity%22%3A%201%2C%20%22subdomains%22%3A%20%22abc%22%2C%20%22tms%22%3A%20false%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29.addTo%28map_bfedd35db5f14f82931ea785beb31402%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20marker_c4c93ffaa08e4533ba564390d5c587b9%20%3D%20L.marker%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B44.669%2C%20-124.546%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29.addTo%28map_bfedd35db5f14f82931ea785beb31402%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20popup_49f5f22c335f4072a194f767447bb711%20%3D%20L.popup%28%7B%22maxWidth%22%3A%20%22100%25%22%7D%29%3B%0A%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20html_8340e1167e7b417a933b1275092cca1f%20%3D%20%24%28%60%3Cdiv%20id%3D%22html_8340e1167e7b417a933b1275092cca1f%22%20style%3D%22width%3A%20100.0%25%3B%20height%3A%20100.0%25%3B%22%3E%3Ci%3E%20Water%20depth%3A%20160%20m%3C/i%3E%3C/div%3E%60%29%5B0%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20popup_49f5f22c335f4072a194f767447bb711.setContent%28html_8340e1167e7b417a933b1275092cca1f%29%3B%0A%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20%20%20%20%20marker_c4c93ffaa08e4533ba564390d5c587b9.bindPopup%28popup_49f5f22c335f4072a194f767447bb711%29%0A%20%20%20%20%20%20%20%20%3B%0A%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20marker_c4c93ffaa08e4533ba564390d5c587b9.bindTooltip%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20NDBC%2046050%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22sticky%22%3A%20true%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20marker_46deb02c03794e36b50c5a32c7ab22d2%20%3D%20L.marker%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B44.69%2C%20-124.13472222222222%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29.addTo%28map_bfedd35db5f14f82931ea785beb31402%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20icon_d334ccb3a22342d19da185951117a511%20%3D%20L.AwesomeMarkers.icon%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22extraClasses%22%3A%20%22fa-rotate-0%22%2C%20%22icon%22%3A%20%22th-large%22%2C%20%22iconColor%22%3A%20%22white%22%2C%20%22markerColor%22%3A%20%22green%22%2C%20%22prefix%22%3A%20%22glyphicon%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20marker_46deb02c03794e36b50c5a32c7ab22d2.setIcon%28icon_d334ccb3a22342d19da185951117a511%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20marker_46deb02c03794e36b50c5a32c7ab22d2.bindTooltip%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PACWAVE%20North%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22sticky%22%3A%20true%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20marker_a2b72e434c374c50b3f6463c74e41d0a%20%3D%20L.marker%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%5B44.58444444444444%2C%20-124.2125%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29.addTo%28map_bfedd35db5f14f82931ea785beb31402%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20icon_f5683dea57724e718c51947b771d3861%20%3D%20L.AwesomeMarkers.icon%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22extraClasses%22%3A%20%22fa-rotate-0%22%2C%20%22icon%22%3A%20%22th%22%2C%20%22iconColor%22%3A%20%22white%22%2C%20%22markerColor%22%3A%20%22red%22%2C%20%22prefix%22%3A%20%22glyphicon%22%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20marker_a2b72e434c374c50b3f6463c74e41d0a.setIcon%28icon_f5683dea57724e718c51947b771d3861%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20marker_a2b72e434c374c50b3f6463c74e41d0a.bindTooltip%28%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%60%3Cdiv%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PACWAVE%20South%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3C/div%3E%60%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7B%22sticky%22%3A%20true%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%29%3B%0A%20%20%20%20%20%20%20%20%0A%3C/script%3E onload="this.contentDocument.open();this.contentDocument.write(    decodeURIComponent(this.getAttribute('data-html')));this.contentDocument.close();" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div></div>
</div>
</div>
<div class="section" id="Import-Data-from-NDBC">
<h2>Import Data from NDBC<a class="headerlink" href="#Import-Data-from-NDBC" title="Permalink to this headline">¶</a></h2>
<p>NDBC buoy data can be imported using MHKiT’s NDBC submodule. At the top of this script, we have already imported this module using the call <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">mhkit.wave.io</span> <span class="pre">import</span> <span class="pre">ndbc</span></code>. Here, we will use the <code class="docutils literal notranslate"><span class="pre">available_data</span></code> function to ask the NDBC servers what data is available for buoy 46050. We will also need to specify what parameter we are interested in. In this case, we are requesting wave spectral wave density data for which NDBC uses the keyword ‘sweden’. We then pass the data of interest using
the filenames of the returned data into the <code class="docutils literal notranslate"><span class="pre">request_data</span></code> function to retrieve the requested data from the NDBC servers.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Spectral wave density for buoy 46050</span>
<span class="n">parameter</span> <span class="o">=</span> <span class="s1">&#39;swden&#39;</span>
<span class="n">buoy_number</span> <span class="o">=</span> <span class="s1">&#39;46050&#39;</span>

<span class="c1"># Request list of available files</span>
<span class="n">ndbc_available_data</span><span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">available_data</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">buoy_number</span><span class="p">)</span>

<span class="c1"># Pass file names to NDBC and request the data</span>
<span class="n">filenames</span> <span class="o">=</span> <span class="n">ndbc_available_data</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span>
<span class="n">ndbc_requested_data</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">request_data</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">filenames</span><span class="p">)</span>

<span class="n">ndbc_requested_data</span><span class="p">[</span><span class="s1">&#39;2020&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#YY</th>
      <th>MM</th>
      <th>DD</th>
      <th>hh</th>
      <th>mm</th>
      <th>.0200</th>
      <th>.0325</th>
      <th>.0375</th>
      <th>.0425</th>
      <th>.0475</th>
      <th>...</th>
      <th>.3300</th>
      <th>.3400</th>
      <th>.3500</th>
      <th>.3650</th>
      <th>.3850</th>
      <th>.4050</th>
      <th>.4250</th>
      <th>.4450</th>
      <th>.4650</th>
      <th>.4850</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>2.28</td>
      <td>2.99</td>
      <td>...</td>
      <td>0.19</td>
      <td>0.22</td>
      <td>0.15</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.06</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.37</td>
      <td>3.30</td>
      <td>3.12</td>
      <td>...</td>
      <td>0.20</td>
      <td>0.15</td>
      <td>0.14</td>
      <td>0.14</td>
      <td>0.07</td>
      <td>0.05</td>
      <td>0.04</td>
      <td>0.02</td>
      <td>0.03</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>4.80</td>
      <td>5.16</td>
      <td>...</td>
      <td>0.07</td>
      <td>0.18</td>
      <td>0.14</td>
      <td>0.10</td>
      <td>0.13</td>
      <td>0.08</td>
      <td>0.04</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>1.70</td>
      <td>1.38</td>
      <td>...</td>
      <td>0.30</td>
      <td>0.14</td>
      <td>0.11</td>
      <td>0.08</td>
      <td>0.10</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.01</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2020</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.24</td>
      <td>5.72</td>
      <td>7.90</td>
      <td>...</td>
      <td>0.12</td>
      <td>0.18</td>
      <td>0.07</td>
      <td>0.10</td>
      <td>0.12</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>8616</th>
      <td>2020</td>
      <td>12</td>
      <td>31</td>
      <td>19</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>...</td>
      <td>0.11</td>
      <td>0.08</td>
      <td>0.08</td>
      <td>0.08</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>8617</th>
      <td>2020</td>
      <td>12</td>
      <td>31</td>
      <td>20</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.99</td>
      <td>...</td>
      <td>0.07</td>
      <td>0.10</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.05</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>8618</th>
      <td>2020</td>
      <td>12</td>
      <td>31</td>
      <td>21</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.01</td>
      <td>...</td>
      <td>0.05</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>8619</th>
      <td>2020</td>
      <td>12</td>
      <td>31</td>
      <td>22</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.93</td>
      <td>...</td>
      <td>0.10</td>
      <td>0.09</td>
      <td>0.09</td>
      <td>0.10</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>8620</th>
      <td>2020</td>
      <td>12</td>
      <td>31</td>
      <td>23</td>
      <td>40</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.02</td>
      <td>0.39</td>
      <td>...</td>
      <td>0.14</td>
      <td>0.05</td>
      <td>0.11</td>
      <td>0.08</td>
      <td>0.04</td>
      <td>0.04</td>
      <td>0.02</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
  </tbody>
</table>
<p>8621 rows × 52 columns</p>
</div></div>
</div>
<div class="section" id="Create-DateTime-index">
<h3>Create DateTime index<a class="headerlink" href="#Create-DateTime-index" title="Permalink to this headline">¶</a></h3>
<p>The data returned from NDBC include separate columns for year, month, day, etc. as shown above. MHKiT has a built-in function to convert these separate columns into a DateTime index for the DataFrame and remove these date ant time columns from the data leaving only the frequency data. The resultant DataFrame is shown below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ndbc_data</span><span class="o">=</span><span class="p">{}</span>
<span class="c1"># Create a Datetime Index and remove NOAA date columns for each year</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">ndbc_requested_data</span><span class="p">:</span>
    <span class="n">year_data</span> <span class="o">=</span> <span class="n">ndbc_requested_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span>
    <span class="n">ndbc_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span> <span class="o">=</span> <span class="n">ndbc</span><span class="o">.</span><span class="n">to_datetime_index</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">year_data</span><span class="p">)</span>

<span class="n">ndbc_data</span><span class="p">[</span><span class="s1">&#39;2020&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0.0200</th>
      <th>0.0325</th>
      <th>0.0375</th>
      <th>0.0425</th>
      <th>0.0475</th>
      <th>0.0525</th>
      <th>0.0575</th>
      <th>0.0625</th>
      <th>0.0675</th>
      <th>0.0725</th>
      <th>...</th>
      <th>0.3300</th>
      <th>0.3400</th>
      <th>0.3500</th>
      <th>0.3650</th>
      <th>0.3850</th>
      <th>0.4050</th>
      <th>0.4250</th>
      <th>0.4450</th>
      <th>0.4650</th>
      <th>0.4850</th>
    </tr>
    <tr>
      <th>date</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2020-01-01 00:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>2.28</td>
      <td>2.99</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>2.91</td>
      <td>7.23</td>
      <td>10.65</td>
      <td>...</td>
      <td>0.19</td>
      <td>0.22</td>
      <td>0.15</td>
      <td>0.12</td>
      <td>0.12</td>
      <td>0.06</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>2020-01-01 01:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.37</td>
      <td>3.30</td>
      <td>3.12</td>
      <td>0.94</td>
      <td>1.49</td>
      <td>3.13</td>
      <td>8.58</td>
      <td>12.09</td>
      <td>...</td>
      <td>0.20</td>
      <td>0.15</td>
      <td>0.14</td>
      <td>0.14</td>
      <td>0.07</td>
      <td>0.05</td>
      <td>0.04</td>
      <td>0.02</td>
      <td>0.03</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2020-01-01 02:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>4.80</td>
      <td>5.16</td>
      <td>0.66</td>
      <td>1.44</td>
      <td>4.19</td>
      <td>14.32</td>
      <td>26.21</td>
      <td>...</td>
      <td>0.07</td>
      <td>0.18</td>
      <td>0.14</td>
      <td>0.10</td>
      <td>0.13</td>
      <td>0.08</td>
      <td>0.04</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2020-01-01 03:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>1.70</td>
      <td>1.38</td>
      <td>0.00</td>
      <td>0.47</td>
      <td>2.91</td>
      <td>15.89</td>
      <td>32.12</td>
      <td>...</td>
      <td>0.30</td>
      <td>0.14</td>
      <td>0.11</td>
      <td>0.08</td>
      <td>0.10</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.01</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>2020-01-01 04:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.24</td>
      <td>5.72</td>
      <td>7.90</td>
      <td>2.75</td>
      <td>0.59</td>
      <td>4.39</td>
      <td>17.49</td>
      <td>18.75</td>
      <td>...</td>
      <td>0.12</td>
      <td>0.18</td>
      <td>0.07</td>
      <td>0.10</td>
      <td>0.12</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2020-12-31 19:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>6.15</td>
      <td>21.06</td>
      <td>28.97</td>
      <td>21.23</td>
      <td>20.75</td>
      <td>...</td>
      <td>0.11</td>
      <td>0.08</td>
      <td>0.08</td>
      <td>0.08</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2020-12-31 20:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.99</td>
      <td>5.20</td>
      <td>21.62</td>
      <td>26.23</td>
      <td>27.02</td>
      <td>32.43</td>
      <td>...</td>
      <td>0.07</td>
      <td>0.10</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.05</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2020-12-31 21:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.01</td>
      <td>0.58</td>
      <td>6.02</td>
      <td>21.26</td>
      <td>18.66</td>
      <td>13.60</td>
      <td>...</td>
      <td>0.05</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.06</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2020-12-31 22:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>0.93</td>
      <td>3.01</td>
      <td>6.65</td>
      <td>8.73</td>
      <td>12.84</td>
      <td>27.10</td>
      <td>...</td>
      <td>0.10</td>
      <td>0.09</td>
      <td>0.09</td>
      <td>0.10</td>
      <td>0.04</td>
      <td>0.03</td>
      <td>0.02</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>2020-12-31 23:40:00</th>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00</td>
      <td>0.02</td>
      <td>0.39</td>
      <td>1.20</td>
      <td>6.47</td>
      <td>18.29</td>
      <td>23.32</td>
      <td>18.16</td>
      <td>...</td>
      <td>0.14</td>
      <td>0.05</td>
      <td>0.11</td>
      <td>0.08</td>
      <td>0.04</td>
      <td>0.04</td>
      <td>0.02</td>
      <td>0.02</td>
      <td>0.01</td>
      <td>0.01</td>
    </tr>
  </tbody>
</table>
<p>8621 rows × 47 columns</p>
</div></div>
</div>
</div>
</div>
<div class="section" id="Calculate-QoIs-from-Spectral-Data">
<h2>Calculate QoIs from Spectral Data<a class="headerlink" href="#Calculate-QoIs-from-Spectral-Data" title="Permalink to this headline">¶</a></h2>
<p>Here we will calculate quantities of interest (QoIs) using the spectral data by applying the appropriate MHKiT function, appending the results to a list, then combining all the lists into a single DataFrame.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Intialize empty lists to store the results from each year</span>
<span class="n">Hm0_list</span><span class="o">=</span><span class="p">[]</span>
<span class="n">Te_list</span><span class="o">=</span><span class="p">[]</span>
<span class="n">J_list</span><span class="o">=</span><span class="p">[]</span>
<span class="n">Tp_list</span><span class="o">=</span><span class="p">[]</span>
<span class="n">Tz_list</span><span class="o">=</span><span class="p">[]</span>

<span class="c1"># Iterate over each year and save the result in the initalized dictionary</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">ndbc_data</span><span class="p">:</span>
    <span class="n">data_raw</span> <span class="o">=</span> <span class="n">ndbc_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span>
    <span class="n">year_data</span> <span class="o">=</span> <span class="n">data_raw</span><span class="p">[</span><span class="n">data_raw</span> <span class="o">!=</span> <span class="mf">999.0</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span>
    <span class="n">Hm0_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">significant_wave_height</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
    <span class="n">Te_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">energy_period</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
    <span class="n">J_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">energy_flux</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mf">399.</span><span class="p">))</span>
    <span class="n">Tp_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">peak_period</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
    <span class="n">Tz_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resource</span><span class="o">.</span><span class="n">average_zero_crossing_period</span><span class="p">(</span><span class="n">year_data</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>

<span class="c1"># Concatenate list of Series into a single DataFrame</span>
<span class="n">Te</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Te_list</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Tp</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Tp_list</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Hm0</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Hm0_list</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">J</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">J_list</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">Tz</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">Tz_list</span> <span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">Hm0</span><span class="p">,</span> <span class="n">Te</span><span class="p">,</span> <span class="n">Tp</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">Tz</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Calculate wave steepness</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Sm&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">Hm0</span> <span class="o">/</span> <span class="p">(</span><span class="mf">9.81</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> <span class="o">*</span> <span class="n">data</span><span class="o">.</span><span class="n">Tz</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Drop any NaNs created from the calculation of Hm0 or Te</span>
<span class="n">data</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># Sort the DateTime index</span>
<span class="n">data</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#data</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Average-Annual-Energy-Table">
<h2>Average Annual Energy Table<a class="headerlink" href="#Average-Annual-Energy-Table" title="Permalink to this headline">¶</a></h2>
<p>A comparison of where a resource’s most energetic sea states are compared with how frequently they occur can be performed using the <code class="docutils literal notranslate"><span class="pre">plot_avg_annual_energy_matrix</span></code> function. For a given set of data, the function will bin the data by Hm0 and Te. Within each bin, the average annual power and avg number of hours are calculated. A contour of the average annual power is plotted in each bin and the average number of hours that sea state occurs is plotted as text in the box.</p>
<p>The figure below shows that the most frequent sea state occurs on average 527 hours per year at an energy period of 7.5 s and a significant wave height of 1.25 m. Dunkle et al. reported a similar most frequent sea state with a slightly longer energy period at 8.5 s and having a 1.75-m wave height for 528 hours per year. The highest average annual energy sea state at buoy 46050 occurs at an energy period of 9.5 s and a significant wave height of 2.75 m and occurs on average for 168 hours per
year. Further, Dunkle et al. reported the most energetic sea state on average to occur at 2.75 m and 10.5 s for 231 hours per year.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Start by cleaning the data of outliers</span>
<span class="n">data_clean</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">.</span><span class="n">Hm0</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">]</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">J</span><span class="o">.</span><span class="n">std</span><span class="p">()</span>
<span class="n">data_clean</span> <span class="o">=</span> <span class="n">data_clean</span><span class="p">[</span><span class="n">data_clean</span><span class="o">.</span><span class="n">J</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">J</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span> <span class="o">-</span> <span class="mf">0.9</span><span class="o">*</span> <span class="n">sigma</span><span class="p">)]</span>

<span class="c1"># Organizing the cleaned data</span>
<span class="n">Hm0</span><span class="o">=</span><span class="n">data_clean</span><span class="o">.</span><span class="n">Hm0</span>
<span class="n">Te</span><span class="o">=</span><span class="n">data_clean</span><span class="o">.</span><span class="n">Te</span>
<span class="n">J</span><span class="o">=</span><span class="n">data_clean</span><span class="o">.</span><span class="n">J</span>

<span class="c1"># Setting the bins for the resource frequency and power distribution</span>
<span class="n">Hm0_bin_size</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">Hm0_edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="o">+</span><span class="n">Hm0_bin_size</span><span class="p">,</span><span class="n">Hm0_bin_size</span><span class="p">)</span>
<span class="n">Te_bin_size</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Te_edges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="o">+</span><span class="n">Te_bin_size</span><span class="p">,</span><span class="n">Te_bin_size</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">mhkit</span><span class="o">.</span><span class="n">wave</span><span class="o">.</span><span class="n">graphics</span><span class="o">.</span><span class="n">plot_avg_annual_energy_matrix</span><span class="p">(</span><span class="n">Hm0</span><span class="p">,</span> <span class="n">Te</span><span class="p">,</span> <span class="n">J</span><span class="p">,</span> <span class="n">Hm0_edges</span><span class="o">=</span><span class="n">Hm0_edges</span><span class="p">,</span> <span class="n">Te_edges</span><span class="o">=</span><span class="n">Te_edges</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/PacWave_resource_characterization_example_11_0.png" src="_images/PacWave_resource_characterization_example_11_0.png" />
</div>
</div>
</div>
<div class="section" id="Wave-Power-by-Month">
<h2>Wave Power by Month<a class="headerlink" href="#Wave-Power-by-Month" title="Permalink to this headline">¶</a></h2>
<p>We can create a plot of monthly statistics for a quantity of interest as shown in the code and plots below. These plots show the median value of a month over the dataset timeframe and bound the value by its 25th and 75th percentile by a shaded region.</p>
<p>Comparing the plots below to the analysis performed by Dunkle et. al we can see that in the top subplot the significant wave height has a maximum mean value in December at 3.11 m, which corresponds well with Fig. 5 in Dunkel et. al. The higher significant wave height also brings higher variability in the winter months than in the summer months, which shows a minimum value around 1.44 m in August. The second and third subplots below show an energy period and peak period each having a maximum
value in January at 10.3 s and 12.5 s, respectively. The minimums also correspond to the same month of July with values of 7.12 s, and 8.33 s for the energy period and peak period, respectively. Dunkle et al. report a minimum energy period value of 8.5 s in July and a maximum energy period of 11.3 s in February and do not report peak period monthly statistics.</p>
<p>The maximum energy flux occurs in December at 48889 kW/m while the minimum occurs in August at 7212 kW/m. These values come in lower than the results from Dunkel et. al., which report values ranging between 70 and 80 kW/m in the winter months and a mean around 20 kW/m in the summer months. The average monthly steepness stays relatively constant throughout the year, ranging between 0.0265 and 0.0313. A discussion of monthly wave steepness was not held in Dunkel et. al but would be interesting to
compare for the PACWAVE-South site.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">months</span><span class="o">=</span><span class="n">data_clean</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span>
<span class="n">data_group</span><span class="o">=</span><span class="n">data_clean</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">months</span><span class="p">)</span>

<span class="n">QoIs</span> <span class="o">=</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">QoIs</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#shade between 25% and 75%</span>
<span class="n">QoIs</span> <span class="o">=</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">QoIs</span><span class="p">)):</span>
    <span class="n">QoI</span> <span class="o">=</span> <span class="n">QoIs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">data_group</span><span class="o">.</span><span class="n">median</span><span class="p">()[</span><span class="n">QoI</span><span class="p">],</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>

    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">months</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span>
                        <span class="n">data_group</span><span class="o">.</span><span class="n">describe</span><span class="p">()[</span><span class="n">QoI</span><span class="p">,</span>   <span class="s1">&#39;25%&#39;</span><span class="p">],</span>
                        <span class="n">data_group</span><span class="o">.</span><span class="n">describe</span><span class="p">()[</span><span class="n">QoI</span><span class="p">,</span>   <span class="s1">&#39;75%&#39;</span><span class="p">],</span>
                        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
    <span class="n">mx</span> <span class="o">=</span> <span class="n">data_group</span><span class="o">.</span><span class="n">median</span><span class="p">()[</span><span class="n">QoI</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
    <span class="n">mx_month</span><span class="o">=</span> <span class="n">data_group</span><span class="o">.</span><span class="n">median</span><span class="p">()[</span><span class="n">QoI</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">mn</span> <span class="o">=</span> <span class="n">data_group</span><span class="o">.</span><span class="n">median</span><span class="p">()[</span><span class="n">QoI</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="n">mn_month</span><span class="o">=</span> <span class="n">data_group</span><span class="o">.</span><span class="n">median</span><span class="p">()[</span><span class="n">QoI</span><span class="p">]</span><span class="o">.</span><span class="n">argmin</span><span class="p">()</span><span class="o">+</span><span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;--------------------------------------------&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoI</span><span class="si">}</span><span class="s1"> max:</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s1">, month: </span><span class="si">{</span><span class="n">mx_month</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoI</span><span class="si">}</span><span class="s1"> min:</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">mn</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span><span class="si">}</span><span class="s1">, month: </span><span class="si">{</span><span class="n">mn_month</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Month&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoIs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> [m]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoIs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">  [s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoIs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s1">  [s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoIs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s1">  [kW/M]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoIs</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s1">  [s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">QoIs</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="si">}</span><span class="s1">  [ ]&#39;</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;40650QoIs.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
--------------------------------------------
Hm0 max:3.1134, month: 12
Hm0 min:1.4445, month: 8
--------------------------------------------
Te max:10.305, month: 1
Te min:7.1154, month: 7
--------------------------------------------
Tp max:12.5, month: 1
Tp min:8.3333, month: 7
--------------------------------------------
J max:48889.5105, month: 12
J min:7212.2974, month: 8
--------------------------------------------
Tz max:7.9858, month: 1
Tz min:5.7369, month: 7
--------------------------------------------
Sm max:0.0313, month: 12
Sm min:0.0265, month: 9
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/PacWave_resource_characterization_example_13_1.png" src="_images/PacWave_resource_characterization_example_13_1.png" />
</div>
</div>
</div>
<div class="section" id="Monthly-Cumulative-Distribution">
<h2>Monthly Cumulative Distribution<a class="headerlink" href="#Monthly-Cumulative-Distribution" title="Permalink to this headline">¶</a></h2>
<p>A cumulative distribution of the energy flux, as described in the IEC TS 62600-101 is created using MHKiT as shown below. The summer months have a lower maximum energy flux and are found left of the black data line representing the cumulative distribution of all collected data. April and October most closely follow the overall energy flux distribution while the winter months show less variation than the summer months in their distribution.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">monthly_cumulative_distribution</span><span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">J</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">1000</span><span class="p">,</span> <span class="mf">1E6</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
(1000, 1000000.0)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/PacWave_resource_characterization_example_15_1.png" src="_images/PacWave_resource_characterization_example_15_1.png" />
</div>
</div>
</div>
<div class="section" id="Extreme-Sea-States">
<h2>Extreme Sea States<a class="headerlink" href="#Extreme-Sea-States" title="Permalink to this headline">¶</a></h2>
<p>Fifty and one-hundred year contours were created using the environmental contours functions. The environmental contours function in MHKiT was adapted from the Wave Energy Converter Design Response Toolbox (WDRT) [Coe et. al, 2016]. The methodologies for calculating environmental contours are an active area of research and differences in methodology can be seen when comparing to the results. Dunkle et al. present 16.68 s and 12.49 m as the peak energy period and significant wave height for the
50-year contour, whereas the methodology applied in MHKiT returns a 50-year peak at 15.71 m and 16.24 s. Dunkle et al. present a peak for the 100-year contour at 13.19 m and 16.85 s, whereas the MHKiT functionality returns 16.62 m and 16.43 s.</p>
<p>Coe, Ryan, Michelen, Carlos, Eckert-Gallup, Aubrey, Yu, Yi-Hsiang, and Van Rij, Jennifer. (2016, March 30). WEC Design Response Toolbox v. 1.0 (Version 00) [Computer software]. <a class="reference external" href="https://www.osti.gov//servlets/purl/1312743">https://www.osti.gov//servlets/purl/1312743</a>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Delta time of sea-states</span>
<span class="n">dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">data_clean</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">seconds</span>

<span class="c1"># Return period (years) of interest</span>
<span class="n">period</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">Hm0_contour_100</span><span class="p">,</span> <span class="n">Te_contour_100</span><span class="p">,</span> <span class="n">PCA</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">environmental_contour</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Hm0</span><span class="p">,</span>
                                                                      <span class="n">data</span><span class="o">.</span><span class="n">Te</span><span class="p">,</span>
                                                                      <span class="n">dt</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">return_PCA</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">period</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">Hm0_contour_50</span><span class="p">,</span> <span class="n">Te_contour_50</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">environmental_contour</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">Hm0</span><span class="p">,</span>
                                                               <span class="n">data</span><span class="o">.</span><span class="n">Te</span><span class="p">,</span>
                                                               <span class="n">dt</span><span class="p">,</span> <span class="n">period</span><span class="p">,</span> <span class="n">PCA</span><span class="o">=</span><span class="n">PCA</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">plot_environmental_contour</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">Te</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">Hm0</span><span class="p">),</span>
                                         <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Te_contour_50</span><span class="p">,</span> <span class="n">Te_contour_100</span><span class="p">])</span><span class="o">.</span><span class="n">T</span><span class="p">,</span>
                                         <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">Hm0_contour_50</span><span class="p">,</span><span class="n">Hm0_contour_100</span><span class="p">])</span><span class="o">.</span><span class="n">T</span> <span class="p">,</span>
                                         <span class="n">data_label</span><span class="o">=</span><span class="s1">&#39;NDBC 46050&#39;</span><span class="p">,</span>
                                         <span class="n">contour_label</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;50 Year Contour&#39;</span><span class="p">,</span><span class="s1">&#39;100 Year Contour&#39;</span><span class="p">],</span>
                                         <span class="n">x_label</span> <span class="o">=</span> <span class="s1">&#39;Energy Period, $Te$ [s]&#39;</span><span class="p">,</span>
                                         <span class="n">y_label</span> <span class="o">=</span> <span class="s1">&#39;Sig. wave height, $Hm0$ [m]&#39;</span><span class="p">,</span>
                                         <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper left&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/PacWave_resource_characterization_example_17_0.png" src="_images/PacWave_resource_characterization_example_17_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">Hm0_contour_50</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">Te_contour_50</span><span class="p">[</span><span class="n">Hm0_contour_50</span><span class="o">.</span><span class="n">argmax</span><span class="p">()])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Hm0_contour_100</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">Te_contour_100</span><span class="p">[</span><span class="n">Hm0_contour_100</span><span class="o">.</span><span class="n">argmax</span><span class="p">()])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
15.709501488494444 16.235216168537534
16.627857736073373 16.435667814334238
</pre></div></div>
</div>
</div>
<div class="section" id="Calculate-Sea-State-Representative-Clusters">
<h2>Calculate Sea State Representative Clusters<a class="headerlink" href="#Calculate-Sea-State-Representative-Clusters" title="Permalink to this headline">¶</a></h2>
<p>The above methodology discusses ways to apply MHKiT and industry standards to characterize a wave energy resource. When optimizing a WEC design through simulation it is customary to consider a limited number of representative sea states as the full set of sea states is intractable to simulate during design optimization. Down-selecting a limited number of sea states results in loss of information. The following analysis will compare a full 2D histogram result to several representative sea state
clusters typically referred to as K-means clusters.</p>
<p>We first calculate the total energy flux for the provided data.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">nHours</span> <span class="o">=</span> <span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">seconds</span><span class="o">/</span><span class="mi">3600</span>
<span class="n">Total</span> <span class="o">=</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">J</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">*</span> <span class="n">nHours</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">Total</span><span class="si">}</span><span class="s1"> (W*hr)/m&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
6729597955.824382 (W*hr)/m
</pre></div></div>
</div>
<div class="section" id="Down-Select-by-2D-Histogram">
<h3>Down Select by 2D Histogram<a class="headerlink" href="#Down-Select-by-2D-Histogram" title="Permalink to this headline">¶</a></h3>
<p>Knowing the total energy flux we may calculate the 2D histogram result and compare it to the total result. We expect this value to near unity. While we have down-selected the number of sea states the histogram is still 100 bins and this is still not generally tractable for WEC optimization. We could continue to reduce the number of histogram bins, however, in sticking with this technique we are generally constrained to a cartesian set of bins.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">Jsum</span><span class="p">,</span> <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">,</span> <span class="n">bn</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">binned_statistic_2d</span><span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">Hm0</span><span class="p">,</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">Te</span><span class="p">,</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">J</span><span class="p">,</span>
                                                  <span class="n">statistic</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span><span class="c1">#,bins=[Te_bins, Hm0_bins])</span>

<span class="n">hist_result</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">Jsum</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">/</span><span class="n">Total</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">hist_result</span><span class="si">}</span><span class="s1"> = (2D Histogram J) / (1-year total J) &#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1.0 = (2D Histogram J) / (1-year total J)
</pre></div></div>
</div>
</div>
<div class="section" id="Down-Select-by-K-means-clusters">
<h3>Down Select by K-means clusters<a class="headerlink" href="#Down-Select-by-K-means-clusters" title="Permalink to this headline">¶</a></h3>
<p>By choosing a limited number of data clusters we should be able to choose some minimum representative number for our sea state which still captures the resource well. To calculate these we will use a Gaussian-mixture model (a more general K-means method) which allows us to assign data points to an individual cluster and assign weights based on the density of points in that cluster. We will consider varying numbers of clusters (<code class="docutils literal notranslate"><span class="pre">N=[4,</span> <span class="pre">8,</span> <span class="pre">16,</span> <span class="pre">32,</span> <span class="pre">64]</span></code>) and then calculate the representative
energy in each cluster by representing each sea state as a Bretchnider spectrum. In the following code, we will create a plot for each of our N clusters and show where the provided data points fall within each cluster.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Compute Gaussian Mixture Model for each number of clusters</span>
<span class="n">Ns</span><span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">]</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">data_clean</span><span class="o">.</span><span class="n">Te</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">Hm0</span><span class="o">.</span><span class="n">values</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">Ns</span><span class="p">),</span><span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">24</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">results</span><span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">N</span> <span class="ow">in</span> <span class="n">Ns</span><span class="p">:</span>
    <span class="n">gmm</span> <span class="o">=</span> <span class="n">GaussianMixture</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">N</span><span class="p">)</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="c1"># Save centers and weights</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">gmm</span><span class="o">.</span><span class="n">means_</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Te&#39;</span><span class="p">,</span><span class="s1">&#39;Hm0&#39;</span><span class="p">])</span>
    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;weights&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gmm</span><span class="o">.</span><span class="n">weights_</span>

    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;Tp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">Te</span> <span class="o">/</span> <span class="mf">0.858</span>
    <span class="n">results</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>


    <span class="n">labels</span> <span class="o">=</span> <span class="n">gmm</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

    <span class="n">i</span> <span class="o">=</span> <span class="n">Ns</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">data_clean</span><span class="o">.</span><span class="n">Te</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">data_clean</span><span class="o">.</span><span class="n">Hm0</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">Te</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">Hm0</span><span class="p">,</span> <span class="s1">&#39;m+&#39;</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">N</span><span class="si">}</span><span class="s1"> Clusters&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ylabel</span><span class="o">=</span><span class="s1">&#39;Energy Period, $T_e$ [s]&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">setp</span><span class="p">(</span><span class="n">axs</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">Ns</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">xlabel</span><span class="o">=</span><span class="s1">&#39;Sig. wave height, $Hm0$ [m&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[Text(0.5, 0, &#39;Sig. wave height, $Hm0$ [m&#39;)]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/PacWave_resource_characterization_example_24_1.png" src="_images/PacWave_resource_characterization_example_24_1.png" />
</div>
</div>
</div>
<div class="section" id="Compare-Representative-Sea-State-Energy-to-Total">
<h3>Compare Representative Sea State Energy to Total<a class="headerlink" href="#Compare-Representative-Sea-State-Energy-to-Total" title="Permalink to this headline">¶</a></h3>
<p>Lastly, we will compare each sea state’s representative energy to the original total energy of the dataset. As expected we observe increasing agreement with the original total energy as the number of clusters increases.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">w</span> <span class="o">=</span> <span class="n">ndbc_data</span><span class="p">[</span><span class="n">year</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">w</span> <span class="o">/</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span>


<span class="k">for</span> <span class="n">N</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">N</span><span class="p">]</span>
    <span class="n">J</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">resource</span><span class="o">.</span><span class="n">bretschneider_spectrum</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">Tp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">result</span><span class="o">.</span><span class="n">Hm0</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">J</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">resource</span><span class="o">.</span><span class="n">energy_flux</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mf">399.</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]])</span>

    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;J&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">J</span>
    <span class="n">results</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>

<span class="n">ratios</span><span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">N</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="n">J_hr</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">N</span><span class="p">]</span><span class="o">.</span><span class="n">J</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">data_clean</span><span class="p">)</span>
    <span class="n">total_weighted_J</span><span class="o">=</span> <span class="p">(</span><span class="n">J_hr</span> <span class="o">*</span> <span class="n">results</span><span class="p">[</span><span class="n">N</span><span class="p">]</span><span class="o">.</span><span class="n">weights</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
    <span class="n">normalized_weighted_J</span> <span class="o">=</span> <span class="n">total_weighted_J</span> <span class="o">/</span> <span class="n">Total</span>
    <span class="n">ratios</span><span class="p">[</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">normalized_weighted_J</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

<span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">ratios</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
4     0.9094
8     0.9533
16    0.9730
32    1.0014
64    1.0146
dtype: float64
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Delft3D_example.html" class="btn btn-neutral float-right" title="Delft3D IO Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cdip_example.html" class="btn btn-neutral float-left" title="MHKiT CDIP IO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2019, National Renewable Energy Laboratory, Pacific Northwest National Laboratory, and Sandia National Laboratories

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-164358105-1', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>