<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MHKiT CDIP IO &mdash; MHKiT v0.7.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/nbsphinx-code-cells.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/mhkit.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PacWave Resource Assessment" href="PacWave_resource_characterization_example.html" />
    <link rel="prev" title="MHKiT WPTO Hindcast Example" href="WPTO_hindcast_example.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            MHKiT
          </a>
              <div class="version">
                v0.7.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="terminology.html">Terminology</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="qc.html">QC Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="wave.html">Wave Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="river.html">River Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="tidal.html">Tidal Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="power.html">Power Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="loads.html">Loads Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="dolfyn.html">DOLfYN Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="mooring.html">Mooring Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utils Module</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="python.html">MHKiT-Python</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="python.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html#api-documentation">API Documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="python.html#examples">Examples</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="qc_example.html">MHKiT Quality Control Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="wave_example.html">MHKiT Wave Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="river_example.html">MHKiT River Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tidal_example.html">MHKiT Tidal Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="power_example.html">MHKiT Power Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="loads_example.html">MHKiT Loads Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="environmental_contours_example.html">MHKiT Environmental Contours</a></li>
<li class="toctree-l3"><a class="reference internal" href="wecsim_example.html">MHKiT WEC-Sim Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="SWAN_example.html">MHKiT SWAN Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="WPTO_hindcast_example.html">MHKiT WPTO Hindcast Example</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MHKiT CDIP IO</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Quick-Start">Quick Start</a></li>
<li class="toctree-l4"><a class="reference internal" href="#1.-Request-Data-from-CDIP">1. Request Data from CDIP</a></li>
<li class="toctree-l4"><a class="reference internal" href="#2.-Processing-the-NetCDF-file">2. Processing the NetCDF file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#3.-Plotting">3. Plotting</a></li>
<li class="toctree-l4"><a class="reference internal" href="#4.-Advanced-queries">4. Advanced queries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#4.b.-request_parse_workflow">4.b. <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="PacWave_resource_characterization_example.html">PacWave Resource Assessment</a></li>
<li class="toctree-l3"><a class="reference internal" href="directional_waves.html">Directional Wave Spectrum from NDBC Buoys</a></li>
<li class="toctree-l3"><a class="reference internal" href="metocean_example.html">MHKiT Metocean Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="metocean_example.html#1.-Request-Continuous-Wind-Data-from-NDBC">1. Request Continuous Wind Data from NDBC</a></li>
<li class="toctree-l3"><a class="reference internal" href="Delft3D_example.html">Delft3D IO Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="adcp_example.html">Reading ADCP Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="ADCP_Delft3D_TRTS_example.html">Comparing Transect Data at the Tanana River Test Site</a></li>
<li class="toctree-l3"><a class="reference internal" href="adv_example.html">Reading ADV Data with MHKiT</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_MLER_example.html">MLER example</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_contour_example.html">Extreme Conditions Modeling - Contour Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="extreme_response_full_sea_state_example.html">Extreme Conditions Modeling - Full Sea State Approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="short_term_extremes_example.html">MHKit Short-term Extreme Loads</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python.html#online-forum">Online Forum</a></li>
<li class="toctree-l2"><a class="reference internal" href="python.html#software-tests">Software Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="matlab.html">MHKiT-MATLAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="webinars.html">Webinars</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="citeus.html">Cite Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact.html">Online Forum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">MHKiT</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="python.html">MHKiT-Python</a></li>
      <li class="breadcrumb-item active">MHKiT CDIP IO</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/cdip_example.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="MHKiT-CDIP-IO">
<h1>MHKiT CDIP IO<a class="headerlink" href="#MHKiT-CDIP-IO" title="Permalink to this heading"></a></h1>
<p>MHKiT includes functions to pull data directly from the Coastal Data Information Program (<a class="reference external" href="http://cdip.ucsd.edu/m/about/">CDIP</a>), an extensive network for monitoring waves and beaches along the coastlines of the United States.</p>
<p>To run this example of using CDIP and its data in MHKiT we will start by importing the necessary python packages (<code class="docutils literal notranslate"><span class="pre">scipy</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code>, <code class="docutils literal notranslate"><span class="pre">numpy</span></code>), and MHKiT wave submodules (<code class="docutils literal notranslate"><span class="pre">resource</span></code>, <code class="docutils literal notranslate"><span class="pre">graphics</span></code>, and <code class="docutils literal notranslate"><span class="pre">io.ndbc</span></code>).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mhkit.wave</span> <span class="kn">import</span> <span class="n">graphics</span>
<span class="kn">from</span> <span class="nn">mhkit.wave.io</span> <span class="kn">import</span> <span class="n">cdip</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
<section id="Quick-Start">
<h2>Quick Start<a class="headerlink" href="#Quick-Start" title="Permalink to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> function is your one-stop shop for pulling and parsing data. It wraps MHKiT’s <code class="docutils literal notranslate"><span class="pre">request_data</span></code> function so that if a station number is passed the function will pull the buoy data from the CDIP servers and then proceed to process the data for the user. <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> allows the user to slice data between a start and/or end date. Alternatively, the user may specify a single year or multiple years of interest. To reduce processing time
<code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> will allow the user to specify parameters of interest and only return data for the specified parameters. By default, the <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> will pull historic data but the user may also specify real-time data if interested. Lastly, due to the long processing time two-dimensional (2D) data is not returned by default. If <strong>all</strong> 2D data is desired the boolean <code class="docutils literal notranslate"><span class="pre">all_2D_variables</span></code> may be specified as True. It is recommended however that if 2D data is needed that
the user passes that parameter in the parameters field. For a full list of 1D, 2D, and metadata variables see the CDIP reference <a class="reference external" href="https://docs.google.com/document/d/1Uz_xIAVD2M6WeqQQ_x7ycoM3iKENO38S4Bmn6SasHtY/edit">here</a> (see BUOY VARIABLES).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mhkit.wave.io</span> <span class="kn">import</span> <span class="n">cdip</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">station_number</span> <span class="o">=</span> <span class="s1">&#39;100&#39;</span>
<span class="n">start_date</span> <span class="o">=</span> <span class="s1">&#39;2020-04-01&#39;</span>
<span class="n">end_date</span><span class="o">=</span> <span class="s1">&#39;2020-04-30&#39;</span>
<span class="n">parameters</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;waveHs&#39;</span><span class="p">,</span> <span class="s1">&#39;waveTp&#39;</span><span class="p">,</span> <span class="s1">&#39;waveMeanDirection&#39;</span><span class="p">]</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">cdip</span><span class="o">.</span><span class="n">request_parse_workflow</span><span class="p">(</span><span class="n">station_number</span><span class="o">=</span><span class="n">station_number</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span>
                       <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Returned data: </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Processing 2D Variables:


Returned data: dict_keys([&#39;data&#39;, &#39;metadata&#39;])

</pre></div></div>
</div>
</section>
<section id="1.-Request-Data-from-CDIP">
<h2>1. Request Data from CDIP<a class="headerlink" href="#1.-Request-Data-from-CDIP" title="Permalink to this heading"></a></h2>
<p>In the above example <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> is used to both request and parse the CDIP data using multiple MHKiT functions in a presepecfied workflow for the user. Here, we will start by running the consituient functions which make up parse data.</p>
<p>To get started we will take a look at the <code class="docutils literal notranslate"><span class="pre">request_netCDF</span></code> function and what is needed to call it. Requesting the NetCDF file is broken out to provide users flexibility by taking a modular approach to the data request. This is useful for the user to make custom workflows beyond what <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> does currently and can also be used if the user prefers to work with the requested data in a tool such as xarray instead of the returned dictionary of dataframes.</p>
<p>MHKiT can be used to request historical or realtime data from the CDIP buoys. A station table and map can be found here to determine a buoy of interest <a class="reference external" href="http://cdip.ucsd.edu/m/stn_table/">http://cdip.ucsd.edu/m/stn_table/</a>. To get started we will call historic data from station number 100. The function will return a netCDF file with all historic data.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">station_number</span><span class="o">=</span><span class="s1">&#39;100&#39;</span>
<span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;historic&#39;</span>
<span class="n">nc</span> <span class="o">=</span> <span class="n">cdip</span><span class="o">.</span><span class="n">request_netCDF</span><span class="p">(</span><span class="n">station_number</span><span class="p">,</span> <span class="n">data_type</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="2.-Processing-the-NetCDF-file">
<h2>2. Processing the NetCDF file<a class="headerlink" href="#2.-Processing-the-NetCDF-file" title="Permalink to this heading"></a></h2>
<p>The returned NetCDF file stored as the nc file above may now be passed to the <code class="docutils literal notranslate"><span class="pre">get_netcdf_variables</span></code> function to extract the data into a dictionary with a DataFrame of 1D variables and the metadata. The ‘data’ and ‘metadata’ each hold different types of data based based on a prefix used on the variable returned by CDIP. Example prefixs are ‘wave’, ‘sst’, and ‘gps’ which are described in further detail below.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_data</span> <span class="o">=</span> <span class="n">cdip</span><span class="o">.</span><span class="n">get_netcdf_variables</span><span class="p">(</span><span class="n">nc</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Returned data: </span><span class="si">{</span><span class="n">buoy_data</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s1"> </span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Returned data: dict_keys([&#39;data&#39;, &#39;metadata&#39;])

</pre></div></div>
</div>
<section id="2.a-The-'data'-key">
<h3>2.a The ‘data’ key<a class="headerlink" href="#2.a-The-'data'-key" title="Permalink to this heading"></a></h3>
<p>As can be seen above the function has returned a dictionary with two keys:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1. &#39;data&#39; - dictionary of DataFrames with keys reffering to the data type. Possible keys include
    a. &#39;wave&#39; - includes processed variables such as Hs, and Tp
    b. &#39;sst&#39; - timeseries of sea surface tempature
    c. &#39;gps&#39; - timeseries of buoy latitude and longitude
    d. &#39;dwr&#39; - directional waverider contains information about accelerometer and buoy batery level
    e. &#39;wave2D&#39; - dictionary of dataframes which are of length time and have columns of wave frequency.
2. &#39;metadata&#39; - any other data that was not of length time of a 2D variable. This has the same keys as the &#39;data&#39; key above.
    a. &#39;meta&#39; - processed variables which started with the meta prefix and are not part of the variable prefixs listed below
    b. &#39;wave&#39; - includes processed variables such as Hs, and Tp
    c. &#39;sst&#39; - timeseries of sea surface tempature
    d. &#39;gps&#39; - timeseries of buoy latitude and longitude
    e. &#39;dwr&#39; - directional waverider contains information about accelerometer and buoy batery level
    f. &#39;wave2D&#39; - dictionary of dataframes which are of length time and have columns of wave frequency.
</pre></div>
</div>
<p>By calling on the dictionary key [‘data’][‘wave’] we can see the associated DataFrame for the wave data. The DataFrame is summarized below where one can see both the time index and values of each column.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;wave&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>waveTime</th>
      <th>waveFlagPrimary</th>
      <th>waveFlagSecondary</th>
      <th>waveHs</th>
      <th>waveTp</th>
      <th>waveTa</th>
      <th>waveDp</th>
      <th>wavePeakPSD</th>
      <th>waveTz</th>
      <th>waveSourceIndex</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2001-01-30 00:17:11</th>
      <td>9.808138e+08</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.97</td>
      <td>14.285714</td>
      <td>5.635270</td>
      <td>275.96875</td>
      <td>1.255072</td>
      <td>4.597701</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2001-01-30 00:47:10</th>
      <td>9.808156e+08</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.95</td>
      <td>14.285714</td>
      <td>5.248230</td>
      <td>266.12500</td>
      <td>1.022441</td>
      <td>4.347826</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2001-01-30 01:17:11</th>
      <td>9.808174e+08</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.93</td>
      <td>15.384616</td>
      <td>4.967487</td>
      <td>252.06250</td>
      <td>0.607862</td>
      <td>4.166667</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2001-01-30 01:47:10</th>
      <td>9.808192e+08</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.03</td>
      <td>13.333333</td>
      <td>5.265260</td>
      <td>275.96875</td>
      <td>1.728395</td>
      <td>4.395604</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>2001-01-30 02:17:10</th>
      <td>9.808210e+08</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.00</td>
      <td>13.333333</td>
      <td>5.288306</td>
      <td>275.96875</td>
      <td>1.107597</td>
      <td>4.395604</td>
      <td>1.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2021-02-19 06:30:00</th>
      <td>1.613716e+09</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.22</td>
      <td>15.384616</td>
      <td>7.991556</td>
      <td>198.03125</td>
      <td>4.272474</td>
      <td>6.060606</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>2021-02-19 07:00:00</th>
      <td>1.613718e+09</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.12</td>
      <td>14.285714</td>
      <td>7.378790</td>
      <td>237.40625</td>
      <td>2.264136</td>
      <td>5.797101</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>2021-02-19 07:30:00</th>
      <td>1.613720e+09</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.13</td>
      <td>14.285714</td>
      <td>7.833025</td>
      <td>237.40625</td>
      <td>3.071583</td>
      <td>6.153846</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>2021-02-19 08:00:00</th>
      <td>1.613722e+09</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.07</td>
      <td>13.333333</td>
      <td>7.808791</td>
      <td>244.43750</td>
      <td>2.477359</td>
      <td>6.153846</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>2021-02-19 08:30:00</th>
      <td>1.613723e+09</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>1.09</td>
      <td>15.384616</td>
      <td>8.456770</td>
      <td>195.21875</td>
      <td>2.489777</td>
      <td>6.666667</td>
      <td>17.0</td>
    </tr>
  </tbody>
</table>
<p>345608 rows × 10 columns</p>
</div></div>
</div>
</section>
<section id="2.b-The-'metadata'-key">
<h3>2.b The ‘metadata’ key<a class="headerlink" href="#2.b-The-'metadata'-key" title="Permalink to this heading"></a></h3>
<p>The metadatakey stores anything not of length time for each of the previous keys. This dictionary also has the ‘meta’ key for any data returned with started with the meta keyword.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_data</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
dict_keys([&#39;wave&#39;, &#39;sst&#39;, &#39;gps&#39;, &#39;dwr&#39;, &#39;meta&#39;, &#39;name&#39;])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_data</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">][</span><span class="s1">&#39;meta&#39;</span><span class="p">]</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;metaDeployLatitude&#39;: array([32.930218, 32.930218, 32.930218, 32.930332, 32.9303  , 32.9303  ,
        32.930668, 32.930668, 32.930668, 32.930668, 32.930668, 32.93043 ,
        32.93043 , 32.93043 , 32.93342 , 32.93342 , 32.933   ],
       dtype=float32),
 &#39;metaDeployLongitude&#39;: array([-117.39256, -117.39256, -117.39256, -117.39256, -117.39238,
        -117.39238, -117.3924 , -117.3924 , -117.3924 , -117.3924 ,
        -117.3924 , -117.39187, -117.39187, -117.39187, -117.39083,
        -117.39083, -117.39073], dtype=float32),
 &#39;metaWaterDepth&#39;: array([549.  , 549.  , 549.  , 549.  , 549.  , 549.  , 555.  , 555.  ,
        555.  , 555.  , 555.  , 549.  , 549.  , 549.  , 549.  , 549.  ,
        571.96], dtype=float32),
 &#39;metaDeclination&#39;: array([13.  , 13.  , 13.  , 13.  , 13.  , 13.  , 13.  , 13.  , 13.  ,
        12.  , 12.15, 11.99, 11.99, 11.94, 11.8 , 11.55, 11.49],
       dtype=float32),
 &#39;metaStationName&#39;: array([b&#39;T&#39;, b&#39;O&#39;, b&#39;R&#39;, b&#39;R&#39;, b&#39;E&#39;, b&#39;Y&#39;, b&#39; &#39;, b&#39;P&#39;, b&#39;I&#39;, b&#39;N&#39;, b&#39;E&#39;,
        b&#39;S&#39;, b&#39; &#39;, b&#39;O&#39;, b&#39;U&#39;, b&#39;T&#39;, b&#39;E&#39;, b&#39;R&#39;, b&#39;,&#39;, b&#39; &#39;, b&#39;C&#39;, b&#39;A&#39;,
        b&#39; &#39;, b&#39;B&#39;, b&#39;U&#39;, b&#39;O&#39;, b&#39;Y&#39;, b&#39; &#39;, b&#39;-&#39;, b&#39; &#39;, b&#39;1&#39;, b&#39;0&#39;, b&#39;0&#39;,
        b&#39;p&#39;, b&#39;1&#39;], dtype=&#39;|S1&#39;),
 &#39;metaStationLatitude&#39;: array([32.931236], dtype=float32),
 &#39;metaStationLongitude&#39;: array([-117.391945], dtype=float32),
 &#39;metaPlatform&#39;: array([b&#39;_&#39;], dtype=&#39;|S1&#39;),
 &#39;metaInstrumentation&#39;: array([b&#39;_&#39;], dtype=&#39;|S1&#39;),
 &#39;metaGridMapping&#39;: array([b&#39;_&#39;], dtype=&#39;|S1&#39;)}
</pre></div></div>
</div>
</section>
</section>
<section id="3.-Plotting">
<h2>3. Plotting<a class="headerlink" href="#3.-Plotting" title="Permalink to this heading"></a></h2>
<p>The wave graphics module has two CDIP stylized plots <a class="reference external" href="http://cdip.ucsd.edu/themes/media/docs/documents/html_pages/annualHs_plot.html">boxplot</a> and <a class="reference external" href="http://cdip.ucsd.edu/themes/media/docs/documents/html_pages/compendium.html">compendium</a>. The CDIP scripts these are based on are hyperlinked.</p>
<section id="3.a.-The-Box-Plot">
<h3>3.a. The Box Plot<a class="headerlink" href="#3.a.-The-Box-Plot" title="Permalink to this heading"></a></h3>
<p>The CDIP stylized box plot is designed to group a passed parameter by months and display descriptive statistics. Below the plot is a general box plot legend showing the outliers as red plus signs, the 25 percentile and 75 percentile mark the edges of the box. The median is shown in as a red line in the box and the mean is shown as a green line with the mean annotated in green above the line. The x-axis has the month name at the bottom and the number of data points in each month at the top.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">Hs_2011_data</span> <span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;wave&quot;</span><span class="p">][</span><span class="s2">&quot;waveHs&quot;</span><span class="p">][</span><span class="s1">&#39;2011&#39;</span><span class="p">]</span>
<span class="n">buoy_name</span> <span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;wave&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">plot_boxplot</span><span class="p">(</span><span class="n">Hs_2011_data</span><span class="p">,</span> <span class="n">buoy_title</span><span class="o">=</span><span class="n">buoy_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/cdip_example_14_0.png" src="_images/cdip_example_14_0.png" />
</div>
</div>
</section>
<section id="3.b.-CDIP-Conpendium-plot">
<h3>3.b. CDIP Conpendium plot<a class="headerlink" href="#3.b.-CDIP-Conpendium-plot" title="Permalink to this heading"></a></h3>
<p>The compendium plot is a time series summary plot of three variables ( Hs, Tp, and Dp). To return the plot simply pass these variable from the <code class="docutils literal notranslate"><span class="pre">['data']['wave']</span></code> dataframe.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wave_data_May_2011</span><span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;wave&#39;</span><span class="p">][</span><span class="s1">&#39;2011-05&#39;</span><span class="p">]</span>
<span class="n">Hs</span> <span class="o">=</span> <span class="n">wave_data_May_2011</span><span class="p">[</span><span class="s1">&#39;waveHs&#39;</span><span class="p">]</span>
<span class="n">Tp</span> <span class="o">=</span> <span class="n">wave_data_May_2011</span><span class="p">[</span><span class="s1">&#39;waveTp&#39;</span><span class="p">]</span>
<span class="n">Dp</span> <span class="o">=</span> <span class="n">wave_data_May_2011</span><span class="p">[</span><span class="s1">&#39;waveDp&#39;</span><span class="p">]</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">plot_compendium</span><span class="p">(</span><span class="n">Hs</span><span class="p">,</span> <span class="n">Tp</span><span class="p">,</span> <span class="n">Dp</span><span class="p">,</span> <span class="n">buoy_name</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/cdip_example_16_0.png" src="_images/cdip_example_16_0.png" />
</div>
</div>
</section>
</section>
<section id="4.-Advanced-queries">
<h2>4. Advanced queries<a class="headerlink" href="#4.-Advanced-queries" title="Permalink to this heading"></a></h2>
<p>In this section we will show how to slice on time ranges of interest.</p>
<section id="4.a.-get_netcdf_variable">
<h3>4.a. <code class="docutils literal notranslate"><span class="pre">get_netcdf_variable</span></code><a class="headerlink" href="#4.a.-get_netcdf_variable" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">get_netcdf_variables</span></code> iterates over and extracts variables from CDIP bouy netCDF file. It takes inputs of <code class="docutils literal notranslate"><span class="pre">start_date</span></code>, <code class="docutils literal notranslate"><span class="pre">end_date</span></code>, <code class="docutils literal notranslate"><span class="pre">parameters</span></code>, and <code class="docutils literal notranslate"><span class="pre">all_2D_variables</span></code>. The start and end date parameters allow us to specify string dates of interest in which to include data after the start date and before the end date. These are specified as a string with precision down to the day in ‘YYYY-MM-DD’ format. Specifying particular parameters of interest allows for faster processing times
and data handeling. For a complete list of parameters see Bouy Variables <a class="reference external" href="https://docs.google.com/document/d/1Uz_xIAVD2M6WeqQQ_x7ycoM3iKENO38S4Bmn6SasHtY/edit">here</a>. Lastly, we can specify to run all 2D variables, although this is not reccomended unless a user truly plans to use all the data becuase of the significant processing time.</p>
<p>For an example we will create a box-plot of HS for the year 2011 from the nc file requested earlier.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_data</span> <span class="o">=</span> <span class="n">cdip</span><span class="o">.</span><span class="n">get_netcdf_variables</span><span class="p">(</span><span class="n">nc</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;2011-01-01&#39;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">&#39;2011-12-31&#39;</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="s1">&#39;waveHs&#39;</span><span class="p">)</span>
<span class="n">buoy_name</span> <span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;wave&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">plot_boxplot</span><span class="p">(</span><span class="n">buoy_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;wave&quot;</span><span class="p">][</span><span class="s2">&quot;waveHs&quot;</span><span class="p">],</span> <span class="n">buoy_title</span><span class="o">=</span><span class="n">buoy_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/cdip_example_18_0.png" src="_images/cdip_example_18_0.png" />
</div>
</div>
</section>
</section>
<section id="4.b.-request_parse_workflow">
<h2>4.b. <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code><a class="headerlink" href="#4.b.-request_parse_workflow" title="Permalink to this heading"></a></h2>
<p>In the previous example we requested the NetCDF file and then processed the data. This workflow has been codified into a single function to streamline the process and adds additional functionality as well. The <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> function accepts a netCDF object or a station number. This means the user may pass a CDIP ndetCDF file loaded from file, pull the data with <code class="docutils literal notranslate"><span class="pre">request_netcdf</span></code> and then pass, or just pass a station number letting the function know what data to parse and return.
Secondly, the <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> function accepts parameters allowing the user to specify to only return specific parameters reducing processing requirements. This is especially useful for processing 2D data which is only processed is specifically requested due to the amount of time it takes to process all the 2D data. Next, <code class="docutils literal notranslate"><span class="pre">request_parse_workflow</span></code> will slice on time by years, start_date, or end date. Years can be a single integer or a list of integers and is not required to be
consecutive. If specified the start date will remove any data prior to the specified string (e.g. ‘2011-01-01’) and end_date will remove any data after the speficied date. start_date and end_date may be used together, seperatly or not at all. Years works indpendently of start and end date. Next, the data_type defaults to historic but specifying this as realtime will return realtime data from the buoy. Lastly, there is a the boolean <code class="docutils literal notranslate"><span class="pre">all_2D_variables</span></code>. If set to true the function will return
all of the wave 2D variables. It is not reccomended to do this due to the computational expense to do so, Instead it is reccomended to specify 2D quantities of interest using the <code class="docutils literal notranslate"><span class="pre">parameters</span></code> keyword.</p>
<p>For an example we will create a compendium of HS for the year 2011 from the nc file requested earlier. In this case we can use the years parameter instead of start and end dates.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">buoy_data</span> <span class="o">=</span> <span class="n">cdip</span><span class="o">.</span><span class="n">request_parse_workflow</span><span class="p">(</span><span class="n">station_number</span><span class="o">=</span><span class="s1">&#39;100&#39;</span><span class="p">,</span> <span class="n">years</span><span class="o">=</span><span class="mi">2011</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;waveHs&#39;</span><span class="p">,</span> <span class="s1">&#39;waveTp&#39;</span><span class="p">,</span> <span class="s1">&#39;waveDp&#39;</span><span class="p">])</span>

<span class="n">Hs</span> <span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;wave&#39;</span><span class="p">][</span><span class="s1">&#39;waveHs&#39;</span><span class="p">]</span>
<span class="n">Tp</span> <span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;wave&#39;</span><span class="p">][</span><span class="s1">&#39;waveTp&#39;</span><span class="p">]</span>
<span class="n">Dp</span> <span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;wave&#39;</span><span class="p">][</span><span class="s1">&#39;waveDp&#39;</span><span class="p">]</span>
<span class="n">buoy_name</span> <span class="o">=</span> <span class="n">buoy_data</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;wave&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">graphics</span><span class="o">.</span><span class="n">plot_compendium</span><span class="p">(</span><span class="n">Hs</span><span class="p">,</span> <span class="n">Tp</span><span class="p">,</span> <span class="n">Dp</span><span class="p">,</span> <span class="n">buoy_name</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/cdip_example_20_0.png" src="_images/cdip_example_20_0.png" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="WPTO_hindcast_example.html" class="btn btn-neutral float-left" title="MHKiT WPTO Hindcast Example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="PacWave_resource_characterization_example.html" class="btn btn-neutral float-right" title="PacWave Resource Assessment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, National Renewable Energy Laboratory, Pacific Northwest National Laboratory, and Sandia National Laboratories.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-164358105-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-164358105-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>